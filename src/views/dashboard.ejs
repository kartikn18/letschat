<h2 class="form-title">Dashboard</h2>
<p class="form-subtitle">Welcome to your account</p>

<div style="text-align: center; padding: 20px 0;">
    <!-- User Information Display -->
    <div style="
        background: rgba(0, 0, 0, 0.55);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        border: 1px solid rgba(255,255,255,0.15);
        box-shadow: 0 8px 32px rgba(0,0,0,0.6);
    ">
        <p style="color: #fff; font-size: 16px; margin-bottom: 0;">
            <strong>Email:</strong> <span style="color:#d6c8ff;"><%= email %></span>
        </p>
    </div>

    <p style="color: #ccc; margin-bottom: 20px;">
        You are successfully logged in!
    </p>
    
    <div style="display: flex; gap: 12px; justify-content: center;">
        <button id="joinRoomBtn" class="btn" style="
            background: linear-gradient(135deg, #b69cff, #8a6cff);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 10px 18px;
            cursor: pointer;
            box-shadow: 0 6px 16px rgba(138,108,255,0.5);
            transition: transform .15s ease, box-shadow .15s ease;
        ">Join Room</button>

        <button id="logoutBtn" class="btn" style="
            background: linear-gradient(135deg, #b69cff, #8a6cff);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 10px 18px;
            cursor: pointer;
            box-shadow: 0 6px 16px rgba(138,108,255,0.5);
            transition: transform .15s ease, box-shadow .15s ease;
        ">Logout</button>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const joinBtn = document.getElementById('joinRoomBtn');
    const logoutBtn = document.getElementById('logoutBtn');

    joinBtn.addEventListener('mouseenter', () => {
        joinBtn.style.transform = 'translateY(-2px)';
        joinBtn.style.boxShadow = '0 10px 22px rgba(138,108,255,0.7)';
    });
    joinBtn.addEventListener('mouseleave', () => {
        joinBtn.style.transform = 'translateY(0)';
        joinBtn.style.boxShadow = '0 6px 16px rgba(138,108,255,0.5)';
    });

    logoutBtn.addEventListener('mouseenter', () => {
        logoutBtn.style.transform = 'translateY(-2px)';
        logoutBtn.style.boxShadow = '0 10px 22px rgba(138,108,255,0.7)';
    });
    logoutBtn.addEventListener('mouseleave', () => {
        logoutBtn.style.transform = 'translateY(0)';
        logoutBtn.style.boxShadow = '0 6px 16px rgba(138,108,255,0.5)';
    });

    joinBtn.addEventListener('click', () => window.location.href = '/join');

    logoutBtn.addEventListener('click', async () => {
        try {
            const response = await fetch('/api/auth/logout', {
                method: 'POST',
                credentials: 'include'
            });

            if (response.ok) {
                window.location.href = '/login';
            } else {
                alert('Logout failed. Please try again.');
            }
        } catch (error) {
            console.error('Logout error:', error);
            alert('Logout failed. Please try again.');
        }
    });
});
</script>
